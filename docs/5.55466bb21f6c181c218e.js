(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return F}));var r=n("iInd"),c=n("8Y7J");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Ob(1,"router-outlet"),c.Sb())},directives:[r.i],encapsulation:2}),e})();var i=n("7dP1"),a=n("Widq"),s=n("OaSA"),l=n("LUZP"),u=n("Dxy4"),m=n("SVse");function b(e,t){1&e&&(c.Tb(0,"mat-header-cell",12),c.Jc(1,"Benutzer"),c.Sb())}function d(e,t){if(1&e&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&e){const e=t.$implicit;c.Bb(1),c.Kc(e.username)}}function f(e,t){1&e&&(c.Tb(0,"mat-header-cell"),c.Jc(1,"Letztes Login"),c.Sb())}function h(e,t){if(1&e&&(c.Tb(0,"mat-cell",13),c.Jc(1),c.gc(2,"date"),c.Sb()),2&e){const e=t.$implicit;c.Bb(1),c.Kc(c.ic(2,1,e.lastLogin,"medium"))}}function p(e,t){1&e&&(c.Tb(0,"mat-header-cell"),c.Jc(1,"Rolle"),c.Sb())}function g(e,t){if(1&e&&(c.Tb(0,"mat-cell",14),c.Jc(1),c.Sb()),2&e){const e=t.$implicit;c.Bb(1),c.Kc(e.role)}}function S(e,t){1&e&&(c.Tb(0,"mat-header-cell"),c.Jc(1,"Aktionen"),c.Sb())}function v(e,t){if(1&e&&(c.Tb(0,"mat-cell"),c.Tb(1,"a",15),c.Jc(2,"Edit"),c.Sb(),c.Sb()),2&e){const e=t.$implicit;c.Bb(1),c.nc("routerLink","edit/",e.id,"")}}function w(e,t){1&e&&c.Ob(0,"mat-header-row")}function C(e,t){1&e&&c.Ob(0,"mat-row")}let T=(()=>{class e{constructor(e,t){this.authService=e,this.userService=t,this.users=null,this.displayedColumns=["username","email","role","actions"]}ngOnInit(){this.userService.getUsers().then(e=>{this.users=e.items})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(i.a),c.Nb(a.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],decls:17,vars:3,consts:[["matSort","","matSortActive","seqNo","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","username"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","email"],[4,"matHeaderCellDef"],["class","description-cell",4,"matCellDef"],["matColumnDef","role"],["class","duration-cell",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"description-cell"],[1,"duration-cell"],["mat-raised-button","",1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"]],template:function(e,t){1&e&&(c.Tb(0,"h1"),c.Jc(1,"Rollenverwaltung"),c.Sb(),c.Tb(2,"mat-table",0),c.Rb(3,1),c.Hc(4,b,2,0,"mat-header-cell",2),c.Hc(5,d,2,1,"mat-cell",3),c.Qb(),c.Rb(6,4),c.Hc(7,f,2,0,"mat-header-cell",5),c.Hc(8,h,3,4,"mat-cell",6),c.Qb(),c.Rb(9,7),c.Hc(10,p,2,0,"mat-header-cell",5),c.Hc(11,g,2,1,"mat-cell",8),c.Qb(),c.Rb(12,9),c.Hc(13,S,2,0,"mat-header-cell",5),c.Hc(14,v,3,1,"mat-cell",3),c.Qb(),c.Hc(15,w,1,0,"mat-header-row",10),c.Hc(16,C,1,0,"mat-row",11),c.Sb()),2&e&&(c.Bb(2),c.lc("dataSource",t.users),c.Bb(13),c.lc("matHeaderRowDef",t.displayedColumns),c.Bb(1),c.lc("matRowDefColumns",t.displayedColumns))},directives:[s.o,l.a,s.c,s.i,s.b,s.k,s.n,s.h,l.b,s.a,u.a,r.g,s.j,s.m],pipes:[m.f],styles:[".add-user[_ngcontent-%COMP%]{margin-bottom:10px}"]}),e})();var H=n("s7LF"),y=n("3YgZ"),B=n("GNmA"),D=n("soTd"),J=n("ZTz/"),O=n("UhP/"),R=n("Q2Ze");const L=["form"];function N(e,t){if(1&e&&(c.Tb(0,"mat-option",10),c.Jc(1),c.Sb()),2&e){const e=t.$implicit;c.lc("value",e.title),c.Bb(1),c.Kc(e.value)}}function M(e,t){1&e&&(c.Tb(0,"mat-error"),c.Jc(1," Rolle muss gew\xe4hlt sein "),c.Sb())}function k(e,t){1&e&&c.Ob(0,"span",11)}function I(e,t){if(1&e){const e=c.Ub();c.Tb(0,"div"),c.Tb(1,"form",1,2),c.bc("ngSubmit",(function(){c.xc(e);const t=c.fc();return t.onSubmit(t.user)})),c.Tb(3,"h1"),c.Jc(4),c.Sb(),c.Tb(5,"mat-select",3,4),c.bc("ngModelChange",(function(t){return c.xc(e),c.fc().user.role=t})),c.Hc(7,N,2,2,"mat-option",5),c.Sb(),c.Hc(8,M,2,0,"mat-error",0),c.Tb(9,"div",6),c.Tb(10,"button",7),c.Jc(11,"Abbrechen"),c.Sb(),c.Tb(12,"button",8),c.Hc(13,k,1,0,"span",9),c.Jc(14," Speichern "),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&e){const e=c.uc(2),t=c.uc(6),n=c.fc();c.Bb(4),c.Lc("Rolle anpassen f\xfcr Benutzer: ",n.user.username,""),c.Bb(1),c.lc("ngModel",n.user.role),c.Bb(2),c.lc("ngForOf",n.roles),c.Bb(1),c.lc("ngIf",t.required),c.Bb(4),c.lc("disabled",n.loading||!e.form.valid),c.Bb(1),c.lc("ngIf",n.loading)}}let P=(()=>{class e{constructor(e,t,n,r,c,o){this.formBuilder=e,this.route=t,this.router=n,this.authService=r,this.userService=c,this.notificationService=o,this.user=null,this.loading=!1,this.submitted=!1,this.roles=B.a.enumSelector(y.a)}ngOnInit(){this.id=this.route.snapshot.params.id,this.userService.getUser(this.id).then(e=>this.user=B.a.fromAws(e))}onSubmit(e){this.submitted=!0,this.form.valid&&(this.loading=!0,this.userService.updateUserRole(e).then(()=>{this.notificationService.info("Benutzerrolle f\xfcr "+this.user.username+" wurde aktualisiert."),this.router.navigate(["/users"]).then(()=>null)}),this.loading=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(H.f),c.Nb(r.a),c.Nb(r.d),c.Nb(i.a),c.Nb(a.a),c.Nb(D.a))},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&c.Oc(L,!0,H.s),2&e&&c.tc(n=c.cc())&&(t.form=n.first)},decls:1,vars:1,consts:[[4,"ngIf"],["novalidate","",3,"ngSubmit"],["form","ngForm"],["placeholder","Rolle","name","role","required","",1,"role",3,"ngModel","ngModelChange"],["role","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"action"],["color","secondary","mat-raised-button","","type","button","routerLink","/users",1,"cancel"],["color","primary","mat-raised-button","","type","submit",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&c.Hc(0,I,15,6,"div",0),2&e&&c.lc("ngIf",t.user)},directives:[m.t,H.F,H.r,H.s,J.a,H.B,H.q,H.t,m.s,u.b,r.e,O.l,R.b],styles:[".action[_ngcontent-%COMP%]{margin-top:10px}.role[_ngcontent-%COMP%]{width:100px}.cancel[_ngcontent-%COMP%]{margin-right:10px}"]}),e})();const x=[{path:"",component:o,children:[{path:"",component:T},{path:"add",component:P},{path:"edit/:id",component:P}]}];let U=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[r.h.forChild(x)],r.h]}),e})();var z=n("0ap7"),A=n("PCNd");let F=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[A.a,U,z.b]]}),e})()}}]);